# N-Body Simulations

## О проекте

Данный проект представляет из себя инструмент для физической симуляции N-тел с их начальными позициями и скоростями. На данный момент поддерживается только двумерное пространство.
Код написан на Python с использованием библиотек OpenCL (для вычисления ускорения с помощью матричных перемножений) и Matplotlib для визуального представления.

Настройки приложения находятся в файле [`config.yaml`](https://github.com/Sirine-Chi/N-Body-Matrix/blob/main/nbody/config.yaml).
Начальное состояние объектов задаётся через CSV-таблицы в папке [`systems_data`](https://github.com/Sirine-Chi/N-Body-Matrix/tree/main/nbody/systems_data).
Для запуска приложения используется файл [`start.py`](https://github.com/Sirine-Chi/N-Body-Matrix/blob/main/nbody/start.py).
Весь вычислительный функционал реализован в файле [`n_body_lib.py`](https://github.com/Sirine-Chi/N-Body-Matrix/blob/main/nbody/n_body_lib.py),
инструменты визуального представления в [`Visualise.py`](https://github.com/Sirine-Chi/N-Body-Matrix/blob/main/nbody/Visualise.py).
Если Вы хотите сгенерировать свои собственные начальные условия, для этого используется [`Generator.py`](https://github.com/Sirine-Chi/N-Body-Matrix/blob/main/nbody/Generator.py).

## Установка

Установите исходный код приложения: либо скачав архив, либо склонировав его через Git CLI.

Для успешной работы приложения, [Python 3](https://www.python.org/) (версии 3.11 и выше) должен быть установлен на Вашем устройстве.

### Linux и MacOS:

В установленной директории (в ней находится папка "nbody"):

- Создайте виртуальную среду (для этого введите в терминале `python3 -m venv venv`)
- Активируйте виртуальную среду (введите `source venv/bin/activate`)
- Установить зависимости из файла `requirements.txt` (введите `pip install -r requirements.txt`)

### Windows

В установленной директории (в ней находится папка "nbody"):

- Создайте виртуальную среду (для этого введите в терминале `python -m venv venv`)
- Активируйте виртуальную среду (введите `.\venv\Scripts\activate`)
- Установить зависимости из файла `requirements.txt` (введите `pip install -r requirements.txt`)

Если во время установки не возникло ошибок, приложение готово к использованию. Если у Вас возникли трудности с созданием виртуальной среды, Вы можете установить зависимости из `requirements.txt` глобально, однако **так лучше не делать**.

## Запуск

### Linux и MacOS
В установленной директории (в ней находится папка "nbody"):


- Запустите следующую команду: ```python3 -m nbody```
- Для изучения дополнительных возможностей введите: ```python3 -m nbody --help``` 

### Windows
В установленной директории (в ней находится папка "nbody"):


- Запустите следующую командуd: ```python -m nbody```
- Для изучения дополнительных возможностей введите: ```python -m nbody --help``` 


## Архитектура

![ММС 10 2](https://github.com/Sirine-Chi/N-Body-Matrix/assets/71520044/8b96fb0b-b24b-458b-8729-2494c63aa1ed)

## Дальнейшие планы

В данный момент я работаю над визуализацией гравитационного потенциального поля, а также над возможностью трёхмерной симуляции.

[Здесь](https://github.com/Sirine-Chi/n-body-simulations) я занимаюсь созданием C++-версии.

## Подробно про `config.yaml`

Перечень возможных настроек:

- `Mode` (Simulation, Progons, Field) - создаёт одну симуляцию/создаёт несколько симуляций с разными начальными позициями/демонстрирует эволюцию гравитационного поля.
- `Force function` (что угодно) – если указано верно, задаёт функцию силы.
- `Method` (Eiler, Adams) – задаёт численный метод для вычисления [обыкновенного дифференциального уравнения](https://ru.wikipedia.org/wiki/%D0%9E%D0%B1%D1%8B%D0%BA%D0%BD%D0%BE%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D0%B5_%D0%B4%D0%B8%D1%84%D1%84%D0%B5%D1%80%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5_%D1%83%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5).
- `End_time` – параметр модели, задающий количество лет для симуляции.
- `Time_step` – задаёт временной интервал в численных методах time.
- `Time_direction` (+1/-1) - задаёт направление времени: в будущее/в прошлое.
- `Pulse_table` – создавать таблицу импульса или нет.

## Подробно про `table.csv`

В данном файле хранятся данные о стартовых позициях и скоростях. Каждая строка отражает характеристики одного тела и должна удовлетворять следующему формату:

`Тип (dynamic, analytic),Имя объекта,Масса,R x,R y,V x, V y,Цвет,Угол (в градусах, измеряеется справа налево относительно оси абсцисс)`

Например:

`dynamic,Earth,1,1.016725701,0,0,6.174482536,aqua,224`

## Распространение

Данное ПО распространяется под лицензией MIT.
